<!-- vim: set tabstop=2 softtabstop=2 shiftwidth=2 noexpandtab textwidth=80 : -->
<!-- ============================================================
LISTADO DE USUARIOS (ADMIN)
============================================================ -->
<html th:replace="~{fragments/layout :: layout(
	title='Listado de usuarios',
	content=~{::main}
)}">
<main>
	<section class="info-box">
		<h1>Gestión de usuarios</h1>

		<!-- Solo visible para administradores -->
		<div th:if="${session.user.admin}">
			<form th:action="@{/userlist/bulk-confirm}" method="post">
				<table class="table">
					<thead>
						<tr>
							<th><input type="checkbox" id="select-all" /></th>
							<th>Email</th>
							<th>Nombre completo</th>
							<th>Administrador</th>
							<th>Fecha de creación</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="user : ${users}">
							<td>
								<input type="checkbox" name="ids"
								       th:value="${user.id}"
								       th:disabled="${session.user.id == user.id}" />
							</td>
							<td th:text="${user.email}">correo@ejemplo.com</td>
							<td th:text="${user.fullName}">Nombre Apellido</td>
							<td th:text="${user.admin ? 'Sí' : 'No'}">No</td>
							<td th:text="${#temporals.format(user.creationTimestamp, 'yyyy-MM-dd HH:mm')}">
								2025-11-03 14:00
							</td>
						</tr>
					</tbody>
				</table>

				<div class="bulk-actions">
					<select name="action" required>
						<option value="">-- Seleccionar acción --</option>
						<option value="GRANT">Hacer administradores</option>
						<option value="REVOKE">Quitar privilegios</option>
						<option value="DELETE">Eliminar usuarios</option>
					</select>
					<button type="submit" class="btn btn-success">Aplicar</button>
				</div>
			</form>
		</div>

		<div th:unless="${session.user.admin}">
			<p>No tiene permisos para ver esta página.</p>
		</div>
	</section>
</main>
</html>