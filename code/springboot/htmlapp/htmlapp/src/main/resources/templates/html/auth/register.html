<!-- vim: set tabstop=2 softtabstop=2 shiftwidth=2 noexpandtab textwidth=80 : -->
<html th:replace="~{fragments/layout :: layout(
    title='Registrar usuario',
    content=~{::main}
)}">

<main>
	<section>
		<h2>Registrar nuevo usuario</h2>

		<form th:action="@{/register}" method="post" th:object="${userForm}">
			<label for="fullName">Nombre completo:</label>
			<input type="text" id="fullName" name="fullName"
			       th:field="*{fullName}" placeholder="Introduce el nombre completo" />

			<label for="email">Correo electrónico:</label>
			<input type="email" id="email" name="email"
			       th:field="*{email}" placeholder="Introduce el correo electrónico" required />

			<label for="passwordPlain">Contraseña:</label>
			<input type="password" id="passwordPlain" name="passwordPlain" required />

			<label for="passwordConfirm">Confirmar contraseña:</label>
			<input type="password" id="passwordConfirm" name="passwordConfirm" required />

			<div class="mt-2">
				<input type="submit" class="btn btn-success" value="Registrar" />
			</div>

			<!-- Mensaje de error (si existe) -->
			<p th:if="${errorMessage}" th:text="${errorMessage}"
			   style="color:var(--color-error); margin-top:1rem;"></p>
		</form>
	</section>
</main>
</html>

<!-- ============================================================
NOTAS DE DISEÑO Y FUNCIONAMIENTO
============================================================ -->
<!--
Esta plantilla sirve tanto para:
 - Usuarios nuevos no logados (registro normal).
 - Administradores autenticados (alta de nuevo usuario).

En ambos casos utiliza el mismo controlador `/register`.
Si hay un usuario logado y no es admin, se redirige a `/main`.

La condición se valida en el controlador con:
   if (authService.isLogged() && !authService.isAdmin()) redirect:/main
-->