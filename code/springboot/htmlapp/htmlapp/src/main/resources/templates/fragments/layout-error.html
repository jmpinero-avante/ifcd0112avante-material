<!-- vim: set tabstop=2 softtabstop=2 shiftwidth=2 noexpandtab textwidth=80 : -->

<!-- ============================================================
FRAGMENTO: LAYOUT DE PÁGINAS DE ERROR
============================================================ -->
<!--
Define la estructura común para todas las páginas de error.
Se usa en los ficheros de /html/error para mostrar mensajes coherentes
sin duplicar el HTML base.

Parámetros:
 - errorCode: número del error (por ejemplo 403, 404, 500)
 - errorMessage: texto descriptivo del error

La vista se invoca con:
<html th:replace="~{fragments/layout-error :: layoutError(
	errorCode=403,
	errorMessage='Acceso denegado.'
)}">
-->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:fragment="layoutError(errorCode, errorMessage)">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title th:text="'Error ' + ${errorCode} + ' - HtmlApp'">HtmlApp - Error</title>
  <link rel="stylesheet" th:href="@{/css/error.css}" />
</head>

<body>
  <div class="error-container">
    <!-- Código del error -->
    <h1 class="error-code" th:text="${errorCode} ?: 'Error'">Error</h1>

    <!-- Descripción del error -->
    <p class="error-message"
       th:text="${errorMessage} ?: 'Ha ocurrido un error inesperado.'">
       Ha ocurrido un error inesperado.
    </p>

    <!-- Enlace principal adaptado al estado de sesión -->
    <a th:if="${session.user != null}"
       th:href="@{/main}"
       class="error-link">Volver a la página principal</a>

    <a th:if="${session.user == null}"
       th:href="@{/}"
       class="error-link">Volver al inicio</a>
  </div>
</body>
</html>

<!-- ============================================================
NOTAS DE DISEÑO Y FUNCIONAMIENTO
============================================================ -->
<!--
1. Los estilos de `error.css` aseguran consistencia visual con el resto del sitio.
2. Se usa `session.user` para decidir el destino del enlace principal.
3. Este layout evita repetir estructura en cada plantilla de error.
4. Compatible con el manejador global de excepciones (ErrorControllerAdvice).
5. Ya no incluye `errorLink`: todos los enlaces se gestionan de forma estándar.
-->