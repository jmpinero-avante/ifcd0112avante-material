<!-- vim: set tabstop=2 softtabstop=2 shiftwidth=2 noexpandtab textwidth=80 : -->
<!-- ============================================================
FRAGMENTO: HEADER (BARRA SUPERIOR DE LA APLICACIÓN)
============================================================ -->
<!--
Este archivo define el fragmento de la barra superior (header)
que aparece en la parte superior de las páginas principales.

Su objetivo es mostrar:
 - El nombre de la aplicación ("HtmlApp").
 - El nombre del usuario logado (si hay sesión activa).
 - La fecha y hora actual, calculadas en el servidor.
 - Un indicador visual [ADMIN] si el usuario es administrador.

El layout principal (`fragments/layout.html`) lo incluye mediante:

    <header th:replace="~{fragments/header :: header}"></header>
-->
<header th:fragment="header">
	<div class="topbar">
		<!-- Sección izquierda del header -->
		<div class="topbar-left">
			<span class="app-name">HtmlApp</span>
		</div>

		<!-- Sección derecha: visible solo si hay sesión activa -->
		<div class="topbar-right" th:if="${session.user != null}">
			<!-- Nombre del usuario logado -->
			<span class="user" th:text="${session.user.fullName}">Usuario</span>

			<!-- Etiqueta [ADMIN] si el usuario tiene privilegios -->
			<span class="role-tag"
			      th:if="${session.user.admin}"
			      style="color:#ffc107; font-weight:bold;">
				[ADMIN]
			</span>

			<!-- Separador visual -->
			<span class="sep">|</span>

			<!-- Fecha y hora del servidor -->
			<time th:text="${#dates.format(#temporals.createNow(), 'yyyy-MM-dd HH:mm')}">
				2025-11-02 15:30
			</time>
		</div>
	</div>
</header>

<!-- ============================================================
NOTAS DE DISEÑO Y FUNCIONAMIENTO
============================================================ -->
<!--
1. CÁLCULO DE LA FECHA/HORA
----------------------------
El valor de `${#dates.format(#temporals.createNow())}` genera la fecha/hora
actual del servidor en el momento del renderizado, sin necesidad de añadirlo
desde el controlador.

2. GESTIÓN DE SESIÓN
---------------------
Los datos se obtienen del objeto `User` almacenado en sesión:
 - `${session.user.fullName}` → nombre completo del usuario.
 - `${session.user.admin}`    → booleano que indica si es administrador.

Estos valores se establecen automáticamente en la sesión desde
`AuthService` durante el login.

3. ESTILO Y APARIENCIA
------------------------
Los estilos se definen en `base.css`, donde `.topbar` controla
la disposición y colores de la barra superior.

4. OBJETIVO PEDAGÓGICO
------------------------
Demuestra cómo Thymeleaf accede a propiedades JavaBean:
`${session.user.admin}` llama internamente a `user.isAdmin()`,
sin necesidad de usar paréntesis.
-->