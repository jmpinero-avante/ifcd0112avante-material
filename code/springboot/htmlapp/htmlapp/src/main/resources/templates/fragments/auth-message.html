<!-- vim: set tabstop=2 softtabstop=2 shiftwidth=2 noexpandtab textwidth=80 : -->

<!--
============================================================
FRAGMENTO: MENSAJES DE AUTENTICACIÓN Y ESTADO GLOBAL
============================================================

Este fragmento muestra mensajes globales relacionados con la autenticación
(login, logout, errores de credenciales) y con estados generales de la sesión.

Puede incluirse en el layout base (`fragments/layout.html`) o directamente
en cualquier plantilla, aunque normalmente se llama desde el layout con:

  <div th:replace="~{fragments/auth-message :: authMessage}"></div>

Su función es ofrecer un punto centralizado para mostrar mensajes globales
a los usuarios sin duplicar código en cada vista.

FUNCIONAMIENTO:
---------------
 - Si el parámetro `logout` llega en la URL (por ejemplo, `/?logout`),
   se muestra un aviso de cierre de sesión correcto.
 - Si existe una variable `errorMessage` en el modelo, se muestra en rojo.
 - Si existe una variable `successMessage`, se muestra en verde.

OBJETIVO PEDAGÓGICO:
---------------------
Este fragmento enseña a los alumnos cómo mostrar mensajes dinámicos
en función del modelo de Spring MVC, utilizando `th:if` y variables
del controlador o de la sesión.

Además, muestra cómo se pueden definir contenedores condicionales
para mensajes globales dentro del diseño general de una aplicación.
-->

<!-- ============================================================
HTML DEL FRAGMENTO (visible)
============================================================ -->
<div th:fragment="authMessage">
	<!-- Mensaje de cierre de sesión correcto -->
	<div class="message message-success"
	     th:if="${param.logout}">
		<p>Has cerrado sesión correctamente.</p>
	</div>

	<!-- Mensaje de error global (por ejemplo, fallo de login) -->
	<div class="message message-error"
	     th:if="${errorMessage}">
		<p th:text="${errorMessage}">Error genérico</p>
	</div>

	<!-- Mensaje de éxito global (opcional) -->
	<div class="message message-success"
	     th:if="${successMessage}">
		<p th:text="${successMessage}">Operación completada con éxito.</p>
	</div>
</div>

<!-- ============================================================
NOTAS DE ESTILO Y COMPORTAMIENTO
============================================================ -->
<!--
1. ESTILOS
-----------
Los estilos se definen en `base.css`:
 - `.message` → contenedor general con padding y borde redondeado.
 - `.message-success` → fondo verde claro y texto oscuro.
 - `.message-error` → fondo rojo claro y texto oscuro.

2. FUNCIONAMIENTO DE `param.logout`
-----------------------------------
Spring MVC expone los parámetros de la URL (por ejemplo, `?logout`)
como variables accesibles desde el modelo mediante `${param.nombre}`.

Así, `th:if="${param.logout}"` evalúa a `true` si la URL contiene `?logout`.

3. USO DE VARIABLES DE MODELO
------------------------------
`errorMessage` y `successMessage` se pueden añadir desde cualquier controlador:

    model.addAttribute("errorMessage", "Credenciales incorrectas");
    model.addAttribute("successMessage", "Cuenta creada correctamente");

4. OBJETIVO PEDAGÓGICO
------------------------
Este fragmento demuestra cómo:
 - Utilizar `th:if` para mostrar u ocultar mensajes dinámicos.
 - Aprovechar los parámetros de petición (`param`) en Thymeleaf.
 - Mantener un único punto de mensajes globales reutilizable.
-->