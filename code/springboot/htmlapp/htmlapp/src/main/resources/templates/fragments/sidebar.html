<!-- vim: set tabstop=2 softtabstop=2 shiftwidth=2 noexpandtab textwidth=80 : -->
<!-- ============================================================
FRAGMENTO: SIDEBAR (MENÃš LATERAL DE NAVEGACIÃ“N)
============================================================ -->
<!--
Define el menÃº lateral fijo de la aplicaciÃ³n, visible solo cuando
el usuario estÃ¡ logado. Su posiciÃ³n y comportamiento se ajustan
mediante las variables globales `--sidebar-width` y `--topbar-height`.
-->

<aside th:fragment="sidebar"
       class="sidebar"
       th:if="${session.user != null}">
	<nav>
		<ul class="menu-list">
			<!-- Opciones generales -->
			<li><a th:href="@{/main}">ğŸ  Inicio</a></li>
			<li><a th:href="@{/user/details/{id}(id=${session.user.id})}">ğŸ‘¤ Mi perfil</a></li>
			<li><a th:href="@{/user/change-password/{id}(id=${session.user.id})}">ğŸ”‘ Cambiar contraseÃ±a</a></li>

			<!-- Opciones solo visibles para administradores -->
			<li th:if="${session.user.admin}">
				<a th:href="@{/userlist/list}">ğŸ§‘â€ğŸ’¼ Administrar usuarios</a>
			</li>
			<li th:if="${session.user.admin}">
				<a th:href="@{/register}">â• Dar de alta usuario</a>
			</li>
			<li th:if="${session.user.admin}">
				<a th:href="@{/downloads/users.sql}" download>â¬‡ï¸ Descargar usuarios (SQL)</a>
			</li>

			<!-- OpciÃ³n comÃºn -->
			<li><a th:href="@{/logout}" class="logout">ğŸšª Cerrar sesiÃ³n</a></li>
		</ul>
	</nav>
</aside>

<!-- ============================================================
NOTAS DE DISEÃ‘O Y FUNCIONAMIENTO
============================================================ -->
<!--
1. COHERENCIA CON EL LAYOUT
----------------------------
 - El sidebar usa las mismas variables estructurales que `layout.css`:
     width: var(--sidebar-width);
     top: var(--topbar-height);

 - Se posiciona de forma fija y deja espacio al `main` mediante `margin-left`.

2. ICONOS
---------
 - Los emojis sirven como iconos accesibles sin depender de librerÃ­as externas.
   Si mÃ¡s adelante se usa una fuente de iconos (ej. Lucide o FontAwesome),
   pueden sustituirse fÃ¡cilmente.

3. ACCESIBILIDAD Y SEMÃNTICA
-----------------------------
 - Estructura basada en `<nav>` + `<ul>` + `<li>` para lectura por screen readers.
 - Los enlaces activos pueden destacarse con `.active`.

4. OBJETIVO PEDAGÃ“GICO
------------------------
 - EnseÃ±a cÃ³mo aplicar visibilidad condicional con Thymeleaf.
 - Demuestra cÃ³mo usar variables globales para coordinar layout y navegaciÃ³n.
-->