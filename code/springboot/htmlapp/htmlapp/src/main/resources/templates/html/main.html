<!-- vim: set tabstop=2 softtabstop=2 shiftwidth=2 noexpandtab textwidth=80 : -->
<!DOCTYPE html>
<html th:replace="~{fragments/layout :: layout(
    title='Panel principal',
    content=~{::main},
    scripts=~{::scriptsBlock}
)}">

<!-- ============================================================
PÁGINA PRINCIPAL TRAS EL LOGIN
============================================================ -->
<!--
Esta es la página principal que se muestra tras iniciar sesión.
Incluye un fondo con efecto parallax, implementado con la librería
Rellax.js (cargada desde un CDN para mayor simplicidad).
-->

<main>
  <section class="text-center">
    <h1 th:text="'Hola, ' + ${session.userName} + '!'">Hola, usuario</h1>
    <p>Bienvenido al panel principal de HtmlApp.</p>

    <div class="mt-4">
      <a th:href="@{/user/details/{id}(id=${session.userId})}" class="btn">
        Ver perfil
      </a>
      <a th:href="@{/logout}" class="btn">Cerrar sesión</a>
    </div>
  </section>

  <!-- Fondo parallax decorativo -->
  <div class="parallax" data-rellax-speed="-2"></div>
</main>

<!-- ============================================================
SCRIPTS (agrupados en un bloque)
============================================================ -->
<th:block th:fragment="scriptsBlock">
  <!-- Importar la librería Rellax desde un CDN -->
  <script src="https://cdn.jsdelivr.net/npm/rellax@1.12.1/rellax.min.js"
          integrity="sha384-kt9hmQ8W07xRHwO2HqWgO8Rtm5s3OCg4EKpHqVG3R3vPt7A4lXCKK6v4xzLprV8P"
          crossorigin="anonymous"></script>

  <!-- Inicialización del efecto Parallax -->
  <script th:inline="javascript">
    /*
     * Inicializa el efecto parallax con la librería Rellax.
     * El atributo data-rellax-speed define la velocidad de desplazamiento.
     * Un valor negativo provoca un movimiento más lento que el scroll normal.
     *
     * Ambas etiquetas <script> se agrupan dentro de este bloque
     * y se inyectan al layout como un único fragmento.
     */
    document.addEventListener('DOMContentLoaded', () => {
      const rellax = new Rellax('.parallax', {
        center: true
      });
    });
  </script>
</th:block>

</html>